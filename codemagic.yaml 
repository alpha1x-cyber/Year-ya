workflows:
  android:
    name: Build Android APK
    max_build_duration: 60
    instance_type: macos-latest
    scripts:
      - name: Install dependencies
        script: |
          yarn install
      - name: Build APK
        script: |
          cd android && ./gradlew assembleRelease
    artifacts:
      - build/app/outputs/flutter-apk/app-release.apk

  ios:
    name: Build iOS App
    max_build_duration: 60
    instance_type: macos-latest
    scripts:
      - name: Install dependencies
        script: |
          yarn install
      - name: Build iOS App
        script: |
          cd ios && pod install && xcodebuild -workspace MyApp.xcworkspace -scheme MyApp -configuration Release
    artifacts:
      - build/ios/iphoneos/MyApp.app
